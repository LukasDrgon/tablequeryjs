$(document).ready(function(){var c,e,f={};$.map($("#table th"),function(a,b){f[a.textContent.toLowerCase()]=b});console.log(f);get_rows_to_display=function(a){console.log("get_rows_to_display.");console.log(a);var b,d=a[0],g=a[1];if(3==a.length)var h=a[2];if($.isArray(g)){console.log("Interior nodes.");var k=get_rows_to_display(g);if(3==a.length)var c=get_rows_to_display(h);"AND"==d?(console.log("AND"),b=_.intersection(k,c)):"OR"==d?(console.log("OR"),b=_.union(k,c)):"NOT"==d&&(console.log("NOT"),
b=_.filter($("table tbody tr"),function(a){var b=!1;_.each(k,function(c){$(a).index()==$(c).index()&&(b=!0)});return!b}))}else{console.log("Child nodes.");switch(d){case "EQ":case "NEQ":var l=RegExp("^"+h+"$");break;case "ILIKE":case "NILIKE":l=RegExp(h,"i");break;case "LIKE":case "NLIKE":l=RegExp(h)}var e="N"!=d.substring(0,1);if(g in f){console.log("left value in table_headings.");var m=f[g];b=$("table tbody tr").filter(function(a){text=$(this).children()[m].textContent;regexp_result=l.test(text);
return e?regexp_result:!regexp_result})}}b||(console.log("no return value, return all rows."),b=$("table tbody tr"));console.log("returning");console.log(b);return b};parse_search_text=function(a){is_parse_successful=!0;try{c=grammar.parse(a)}catch(b){is_parse_successful=!1}return is_parse_successful};update_table_search_text_warning=function(){0==$("#table_search_text").val().length?($("#table_search_text_control_group").removeClass("error"),$("#table_search_text_control_group").removeClass("success")):
is_parse_successful?($("#table_search_text_control_group").removeClass("error"),$("#table_search_text_control_group").addClass("success")):($("#table_search_text_control_group").addClass("error"),$("#table_search_text_control_group").removeClass("success"))};$("#table_search_text").keyup(function(a){if($(this).val()==e)return!1;rc=parse_search_text($(this).val());update_table_search_text_warning(rc);rc?(rows_to_display=get_rows_to_display(c),$("#table tbody tr").hide(),_.each(rows_to_display,function(a){$(a).show()}),
console.log(rows_to_display)):$("#table tbody tr").show();e=$(this).val()});$("#table_search_text").keypress(function(a){return 13!==(a.keyCode||a.which||a.charCode||0)});$("#table_search_error").hide()});
